{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';// ��� ��� ���������\nimport backgroundImage from'../images/background.jpg';// ������ �������� �����������\nimport'../styles/LoginPage.css';// ���� � ������\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const navigate=useNavigate();// ��� ��������������� �� ������ ��������\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);// ��������� ��� ���������� ��������\nconst handleLogin=async()=>{if(email&&password){setLoading(true);// �������� ��������� ��������\ntry{const response=await fetch('http://localhost:5000/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});if(!response.ok){// �������� ������ � �������\nconst errorData=await response.json();setError(errorData.message||'Invalid login or password');return;}const data=await response.json();console.log('Login successful:',data);if(data.token){localStorage.setItem('authToken',data.token);}// ��������� ���� �� ������ �������\nif(data.role===false){navigate('/event');}else if(data.role===true){navigate('/admin');}else{setError('Role not defined');}}catch(err){console.error('Error during login:',err);setError('Server error. Please try again later.');}finally{setLoading(false);// ��������� ��������� ��������\n}}else{setError('Please fill in all fields');}};// ���������� ��� �������� �� �������� �����������\nconst handleRegister=()=>{navigate('/register');// ��������������� �� �������� �����������\n};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",style:{backgroundImage:\"url(\".concat(backgroundImage,\")\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",placeholder:\"Enter your email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",placeholder:\"Enter your password\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",onClick:handleLogin,disabled:loading,children:loading?'Logging in...':'Login'}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-link\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:handleRegister,children:\"Register\"})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","backgroundImage","jsx","_jsx","jsxs","_jsxs","LoginPage","navigate","email","setEmail","password","setPassword","error","setError","loading","setLoading","handleLogin","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","message","data","console","log","token","localStorage","setItem","role","err","handleRegister","className","style","concat","children","htmlFor","type","id","placeholder","value","onChange","e","target","onClick","disabled","href"],"sources":["D:/Work/event-frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom'; // ��� ��� ���������\r\nimport backgroundImage from '../images/background.jpg'; // ������ �������� �����������\r\nimport '../styles/LoginPage.css'; // ���� � ������\r\n\r\nconst LoginPage = () => {\r\n    const navigate = useNavigate(); // ��� ��������������� �� ������ ��������\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false); // ��������� ��� ���������� ��������\r\n\r\n    const handleLogin = async () => {\r\n        if (email && password) {\r\n            setLoading(true); // �������� ��������� ��������\r\n\r\n            try {\r\n                const response = await fetch('http://localhost:5000/api/login', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({ email, password }),\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    // �������� ������ � �������\r\n                    const errorData = await response.json();\r\n                    setError(errorData.message || 'Invalid login or password');\r\n                    return;\r\n                }\r\n\r\n                const data = await response.json();\r\n                console.log('Login successful:', data);\r\n\r\n                if (data.token) {\r\n                    localStorage.setItem('authToken', data.token);\r\n                }\r\n\r\n                // ��������� ���� �� ������ �������\r\n                if (data.role === false) {\r\n                    navigate('/event');\r\n                } else if (data.role === true) {\r\n                    navigate('/admin');\r\n                } else {\r\n                    setError('Role not defined');\r\n                }\r\n            } catch (err) {\r\n                console.error('Error during login:', err);\r\n                setError('Server error. Please try again later.');\r\n            } finally {\r\n                setLoading(false); // ��������� ��������� ��������\r\n            }\r\n        } else {\r\n            setError('Please fill in all fields');\r\n        }\r\n    };\r\n\r\n    // ���������� ��� �������� �� �������� �����������\r\n    const handleRegister = () => {\r\n        navigate('/register'); // ��������������� �� �������� �����������\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\r\n            <div className=\"login-box\">\r\n                <h1>Login</h1>\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        placeholder=\"Enter your email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        placeholder=\"Enter your password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                    />\r\n                </div>\r\n                <button className=\"login-btn\" onClick={handleLogin} disabled={loading}>\r\n                    {loading ? 'Logging in...' : 'Login'}\r\n                </button>\r\n                <div className=\"register-link\">\r\n                    <span>Don't have an account?</span>\r\n                    <a href=\"#\" onClick={handleRegister}>\r\n                        Register\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}