{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\event-frontend\\\\src\\\\pages\\\\EventDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './EventDetailPage.css';\nimport backgroundImage from '../images/background.jpg';\nimport { EventService } from '../services/EventService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventDetailPage = () => {\n  _s();\n  const {\n    eventId\n  } = useParams();\n  const [eventData, setEventData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [serverError, setServerError] = useState('');\n  useEffect(() => {\n    const loadEvent = async () => {\n      try {\n        const data = await EventService.fetchEventDetails(eventId); // Используем сервис для получения данных\n        setEventData(data);\n      } catch (error) {\n        setServerError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    if (eventId) {\n      loadEvent();\n    } else {\n      setServerError('Event not found.');\n      setIsLoading(false);\n    }\n  }, [eventId]);\n  const handleRegisterClick = async () => {\n    try {\n      await EventService.registerForEvent(eventId); // Используем сервис для регистрации\n      alert('Successfully registered for the event!');\n      const updatedData = await EventService.fetchEventDetails(eventId); // Обновляем данные события\n      setEventData(updatedData);\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading event details...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 27\n  }, this);\n  if (!eventData) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: serverError || 'Event not found'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 28\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"background\",\n    style: {\n      backgroundImage: `url(${backgroundImage})`\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"event-detail-container\",\n      children: [serverError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: serverError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-detail\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => window.history.back(),\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: eventData.image || 'default-image.jpg',\n          alt: eventData.name,\n          className: \"event-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: eventData.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: eventData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Date: \", new Date(eventData.date).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Place: \", eventData.place_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Category: \", eventData.category_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Maximum Participants:\", ' ', eventData.max_amount != null ? eventData.max_amount : 'No limit']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Participants (\", eventData.participants.length, eventData.max_amount != null ? `/${eventData.max_amount}` : '', \"):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: eventData.participants.length > 0 ? eventData.participants.map((participant, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [participant.name, \" \", participant.surname, \" - Registered on:\", ' ', new Date(participant.reg_date).toLocaleString('ru-RU', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit',\n                second: '2-digit',\n                hour12: true\n              })]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 37\n            }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No participants yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRegisterClick,\n            disabled: eventData.max_amount && eventData.participants.length >= eventData.max_amount,\n            children: eventData.max_amount && eventData.participants.length >= eventData.max_amount ? 'Event Full' : 'Register for Event'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(EventDetailPage, \"cIglF+pQT7ca3VjmYI4r24vHlXA=\", false, function () {\n  return [useParams];\n});\n_c = EventDetailPage;\nexport default EventDetailPage;\nvar _c;\n$RefreshReg$(_c, \"EventDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","backgroundImage","EventService","jsxDEV","_jsxDEV","EventDetailPage","_s","eventId","eventData","setEventData","isLoading","setIsLoading","serverError","setServerError","loadEvent","data","fetchEventDetails","error","message","handleRegisterClick","registerForEvent","alert","updatedData","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","onClick","window","history","back","src","image","alt","name","description","Date","date","toLocaleString","place_name","category_name","max_amount","participants","length","map","participant","index","surname","reg_date","year","month","day","hour","minute","second","hour12","disabled","_c","$RefreshReg$"],"sources":["D:/Work/event-frontend/src/pages/EventDetailPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './EventDetailPage.css';\nimport backgroundImage from '../images/background.jpg';\nimport { EventService } from '../services/EventService';\n\nconst EventDetailPage = () => {\n    const { eventId } = useParams();\n    const [eventData, setEventData] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [serverError, setServerError] = useState('');\n\n    useEffect(() => {\n        const loadEvent = async () => {\n            try {\n                const data = await EventService.fetchEventDetails(eventId);  // Используем сервис для получения данных\n                setEventData(data);\n            } catch (error) {\n                setServerError(error.message);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        if (eventId) {\n            loadEvent();\n        } else {\n            setServerError('Event not found.');\n            setIsLoading(false);\n        }\n    }, [eventId]);\n\n    const handleRegisterClick = async () => {\n        try {\n            await EventService.registerForEvent(eventId);  // Используем сервис для регистрации\n            alert('Successfully registered for the event!');\n            const updatedData = await EventService.fetchEventDetails(eventId);  // Обновляем данные события\n            setEventData(updatedData);\n        } catch (error) {\n            alert(error.message);\n        }\n    };\n\n    if (isLoading) return <p>Loading event details...</p>;\n    if (!eventData) return <p>{serverError || 'Event not found'}</p>;\n\n    return (\n        <div\n            className=\"background\"\n            style={{ backgroundImage: `url(${backgroundImage})` }}\n        >\n            <div className=\"event-detail-container\">\n                {serverError && <p className=\"error\">{serverError}</p>}\n                <div className=\"event-detail\">\n                    <button className=\"back-button\" onClick={() => window.history.back()}>\n                        Back\n                    </button>\n                    <img\n                        src={eventData.image || 'default-image.jpg'}\n                        alt={eventData.name}\n                        className=\"event-image\"\n                    />\n                    <div className=\"event-info\">\n                        <h1>{eventData.name}</h1>\n                        <p>{eventData.description}</p>\n                        <p>Date: {new Date(eventData.date).toLocaleString()}</p>\n                        <p>Place: {eventData.place_name}</p>\n                        <p>Category: {eventData.category_name}</p>\n                        <p>\n                            Maximum Participants:{' '}\n                            {eventData.max_amount != null ? eventData.max_amount : 'No limit'}\n                        </p>\n                        <h3>\n                            Participants ({eventData.participants.length}\n                            {eventData.max_amount != null ? `/${eventData.max_amount}` : ''}):\n                        </h3>\n                        <ul>\n                            {eventData.participants.length > 0 ? (\n                                eventData.participants.map((participant, index) => (\n                                    <li key={index}>\n                                        {participant.name} {participant.surname} - Registered on:{' '}\n                                        {new Date(participant.reg_date).toLocaleString('ru-RU', {\n                                            year: 'numeric',\n                                            month: 'long',\n                                            day: 'numeric',\n                                            hour: '2-digit',\n                                            minute: '2-digit',\n                                            second: '2-digit',\n                                            hour12: true,\n                                        })}\n                                    </li>\n                                ))\n                            ) : (\n                                <p>No participants yet.</p>\n                            )}\n                        </ul>\n                        <button\n                            onClick={handleRegisterClick}\n                            disabled={\n                                eventData.max_amount &&\n                                eventData.participants.length >= eventData.max_amount\n                            }\n                        >\n                            {eventData.max_amount &&\n                                eventData.participants.length >= eventData.max_amount\n                                ? 'Event Full'\n                                : 'Register for Event'}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EventDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}